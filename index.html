<!--
Twitch Stream Jackpot para ElRichMC

Copyright (c) 2017 Marcos Gómez, PatoGraphics, ElRichMC


Está prohibida la distribución no autorizada de 
este material o parte de él.

Source: http://github.com/margobra8/jackpot
Contacto: https://twitter.com/margobra8
-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    function set_body_height() {
        $('body').height($(window).height());
    }
    $(document).ready(function () {
        $(window).bind('resize', set_body_height);
        set_body_height();
    });

</script>

<style>
    * {
        padding: 0;
        margin: 0;
    }

    body {
        background-color: #01FF02;
    }

    .fit {
        /* tamaño relativo a la ventana */
        height: 700px;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
    }

    #vid {
        z-index: 1;
    }

    #alert-text {
        padding: 15px;
        text-shadow: 0px 0px 1px #000, 0px 0px 2px #000, 0px 0px 3px #000, 0px 0px 4px #000, 0px 0px 5px #000;
    }

    #alert-message,
    #alert-user-message {
        text-align: center;
    }

    #alert-user-message img {
        vertical-align: middle;
        height: 1em;
    }

    #alert-message>span>span {
        display: inline-block;
    }

    #alert-text {
        z-index: 6;
    }

    #alert-text-wrap {
        z-index: 6;
    }

    section {
        position: absolute;
        top: 50%;
        left: 50%;
        margin-right: -50%;
        transform: translate(-50%, -50%);
    }
</style>

<div id="container" class="section">
    <video id="vid" class="fit" style="display:none">
        <source id="file" src="" type="video/mp4">
    </video>
</div>
<div id="alert-text-wrap">
        <div id="alert-text">
            <div id="alert-message">{messageTemplate}</div>
            <div id="alert-user-message">{userMessage}</div>
        </div>
    </div>
<audio id="music">
    <source id="jingle" src="audio.mp3" type="audio/mpeg">
</audio>

<script>
    $(document).ready(function () {
        $('#alert-text-wrap').width($("#vid").width() * 0.5);
    });


    function generar() {
        var random = 1 + Math.floor(Math.random() * 15);
        return random;
    }

    function determinarPremios() {
        var num = Math.floor(Math.random() * (150 - 1 + 1) + 1);
        console.log(num);

        if (num == 1) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot3.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "777";
        } else if (num <= 21 && num > 1) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot5.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "FAIL";
        } else if (num <= 41 && num > 21) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot7.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "RELOJ";
        } else if (num <= 56 && num > 41) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot4.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "ENDER PEARL";
        } else if (num <= 71 && num > 56) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot1.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "RICH";
        } else if (num <= 90 && num > 71) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot6.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "MARTILLO";
        } else if (num <= 100 && num > 90) {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Jackpot2.mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/ganar.mp3");
            return "BIT";
        } else {
            $("#file").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/5abed987/Fail" + generar() + ".mp4");
            $("#jingle").attr("src", "https://cdn.rawgit.com/margobra8/jackpot/a382fe33/perder.mp3");
            return "NADA";
        }

    }
    determinarPremios();
    $("#music")[0].play();
    setTimeout(function () {
        $("#vid").fadeIn("slow");
        $("#vid")[0].play();
    }, 1225);
/* 
    setTimeout(function () {
        $("#imga").fadeIn("50");
        setTimeout(function () {
            $("#imgb").fadeIn("50");
            setTimeout(function () {
                $("#imgc").fadeIn("50");
            }, 350);
        }, 300);
    }, 4000); */

</script>